!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){!function(){e.exports=this.wp.i18n}()},function(e,t){!function(){e.exports=this.lodash}()},function(e,t){!function(){e.exports=this.wp.sanitize}()},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){!function(){e.exports=this.wp.url}()},function(e,t,n){var r=n(4);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}},function(e,t){!function(){e.exports=this.wp.apiFetch}()},function(e,t,n){var r=n(14);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var r=n(16),o=n(15);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?o(e):t}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(4),c=n.n(o),s=n(6),a=n.n(s),i=n(12),u=n.n(i),l=n(11),p=n.n(l),f=n(10),d=n.n(f),m=n(9),b=n.n(m),w=n(8),O=n.n(w),j=n(1),y=n(7),h=n.n(y),g=n(5),v="https://2019.europe.wordcamp.org/wp-json/",_=!1;function x(e){return _?fetch("".concat(v).concat(e)).then(function(e){return e.json()}):h()({path:e})}var E=n(2),k=n(3),S=function(e){var t=e.post,n=t.date_gmt,o=t.link,c=t.title.rendered,s=t.excerpt.rendered,a=t._embedded["wp:term"],i=t.categories,u=Object(E.keyBy)(Object(E.flatten)(a),"id");return Object(r.createElement)("div",{className:"wordcamp-latest-post"},Object(r.createElement)("h4",{className:"wordcamp-latest-post-title"},Object(r.createElement)("a",{href:o},Object(k.stripTagsAndEncodeText)(c))),Object(r.createElement)("span",{className:"wordcamp-latest-post-date"},new Date(n).toLocaleDateString()),Object(r.createElement)("span",{className:"wordcamp-latest-post-excerpt"},Object(k.stripTagsAndEncodeText)(s)),Object(r.createElement)("span",{className:"wordcamp-latest-post-categories"},!!i.length&&i.map(function(e,t){var n=u[e],o=n.name,c=n.link;return Object(r.createElement)("a",{key:t,href:c},o)})))},L=function(){return Object(r.createElement)("div",{className:"wordcamp-loading"},Object(j._x)("Loading...","pwa-placeholder","wordcamp-pwa-page"))},N=function(e){var t=e.list,n=t.isFetching,o=t.data;return n&&0===o.length?Object(r.createElement)(L,null):Object(r.createElement)(r.Fragment,null,o.filter(function(e){return!!e}).map(function(e){return Object(r.createElement)(S,{key:e.id,post:e})}))},P=function(e){var t,n,o=e.session,c=o.session,s=(c=void 0===c?{link:"#",title:{rendered:Object(j._x)("Track finished","session title","wordcamp-pwa-page")},session_date_time:{time:""},session_category:[],_embedded:{"wp:term":{},speakers:[]},meta:{_wcpt_session_type:""}}:c).link,a=void 0===s?"#":s,i=c.title.rendered,u=void 0===i?"":i,l=c.session_date_time.time,p=void 0===l?"":l,f=c.session_category,d=void 0===f?[]:f,m=c._embedded,b=m["wp:term"],w=void 0===b?{}:b,O=m.speakers,y=void 0===O?[]:O,h=c.meta._wcpt_session_type,g=void 0===h?"":h,v=o.track,_=v.name,x=v.slug,S=Object(E.keyBy)(Object(E.flatten)(w),"id"),L=y.filter(function(e){return!!e.id});if(d.length>0){var N=d[0];t=S[N].name,n=S[N].slug}return Object(r.createElement)("div",{className:"wordcamp-schedule-session ".concat(g)},Object(r.createElement)("span",{className:"wordcamp-schedule-session-track ".concat(x)},_),Object(r.createElement)("h4",{className:"wordcamp-schedule-session-title"},Object(r.createElement)("a",{href:a},Object(k.stripTagsAndEncodeText)(u))),Object(r.createElement)("span",{className:"wordcamp-schedule-session-time"},p),Object(r.createElement)("span",{className:"wordcamp-schedule-session-speaker"},!!L.length&&L.map(function(e){var t=e.id,n=e.title.rendered,o=e.link;return Object(r.createElement)("a",{key:t,href:o},Object(k.stripTagsAndEncodeText)(n))})),!!t&&Object(r.createElement)("span",{className:"wordcamp-schedule-session-category ".concat(n)},t))},F=function(e){var t=e.title,n=e.sessions;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("h3",null,t),n.filter(function(e){return!!e}).map(function(e,t){var n=e.session?e.session.id:t;return Object(r.createElement)(P,{key:"".concat(n,"-").concat(e.track.id),session:e})}))},T=function(e){var t=e.sessionList,n=e.trackList;if((t.isFetching||n.isFetching)&&0===t.data.length)return Object(r.createElement)(L,null);var o=function(e){var t=window.now||new Date;if(Array.isArray(e.tracks))return e.tracks.map(function(n){var r=Object(E.sortBy)(e.sessions.filter(function(e){return e.session_track.includes(n.id)}),function(e){return e.meta._wcpt_session_time}),o=r.findIndex(function(e){return t<new Date(1e3*e.meta._wcpt_session_time)}),c=r[o],s=r[o-1];return{track:n,now:s,next:c}})}({sessions:t.data,tracks:n.data}),c=o.map(function(e){return{track:e.track,session:e.now}}).filter(function(e){return!!e.session}),s=o.map(function(e){return{track:e.track,session:e.next}});return Object(r.createElement)(r.Fragment,null,!!c.length&&Object(r.createElement)(F,{sessions:c,title:Object(j._x)("On now","title","wordcamp-pwa-page")}),!!s.length&&Object(r.createElement)(F,{sessions:s,title:Object(j._x)("Up next","title","wordcamp-pwa-page")}))},A={sessionList:function(){return x(Object(g.addQueryArgs)("wp/v2/sessions",{per_page:100,status:"publish",_embed:!0}))},trackList:function(){return x(Object(g.addQueryArgs)("wp/v2/session_track",{per_page:100,status:"publish"}))},postList:function(){return x(Object(g.addQueryArgs)("wp/v2/posts",{per_page:3,status:"publish",_embed:!0}))}},I={urls:{}},D=function(e){function t(e){var n;u()(this,t),n=d()(this,b()(t).call(this,e));var r=window.WCPWAP||{};n.updateIntervalId=-1,n.state={config:a()({},I,r)};for(var o=0,c=Object.keys(A);o<c.length;o++){var s=c[o];n.state[s]={isFetching:!0,error:null,data:[]}}return n}return O()(t,e),p()(t,[{key:"updateLists",value:function(){for(var e=this,t=function(){var t=r[n];A[t]().then(function(n){e.setState(c()({},t,{isFetching:!1,data:n}))}).catch(function(n){return e.setState(function(e){return a()({},e,c()({},t,a()({},e[t],{isFetching:!1,error:n})))})})},n=0,r=Object.keys(A);n<r.length;n++)t()}},{key:"componentDidMount",value:function(){this.updateLists(),this.updateIntervalId=window.setInterval(this.updateLists,6e4)}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.updateIntervalId)}},{key:"render",value:function(){var e=this.state,t=e.postList,n=e.sessionList,o=e.trackList,c=e.config;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"pwa-page-content"},Object(r.createElement)(T,{sessionList:n,trackList:o}),Object(r.createElement)("a",{href:c.urls.schedule,className:"full-schedule"},Object(j._x)("View Full Schedule","text","wordcamp-pwa-page"))),Object(r.createElement)("div",{className:"pwa-page-content"},Object(r.createElement)("h2",null,Object(j._x)("Latest Posts","title","wordcamp-pwa-page")),Object(r.createElement)(N,{list:t}),Object(r.createElement)("a",{href:c.urls.posts,className:"all-posts"},Object(j._x)("View all Posts","title","wordcamp-pwa-page"))))}}]),t}(r.Component),B=document.getElementById("pwa-root");Object(r.render)(Object(r.createElement)(D,null),B),window.setDate=function(e){window.now=e}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r}]);