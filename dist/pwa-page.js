!function(e){var t={};function n(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){!function(){e.exports=this.lodash}()},function(e,t){!function(){e.exports=this.wp.sanitize}()},function(e,t){!function(){e.exports=this.wp.url}()},function(e,t){!function(){e.exports=this.wp.i18n}()},function(e,t){!function(){e.exports=this.wp.apiFetch}()},function(e,t,n){"use strict";n.r(t);var s=n(0),r=n(1),c=n(4),a=n(5),o=n.n(a),i=n(3),l="https://2019.europe.wordcamp.org/wp-json/",u=!1;function p(e){return u?fetch("".concat(l).concat(e)).then(function(e){return e.json()}):o()({path:e})}var m=n(2),d=function(e){var t=e.post,n=t.date_gmt,c=t.link,a=t.title.rendered,o=t.excerpt.rendered,i=t._embedded["wp:term"],l=t.categories,u=Object(r.keyBy)(Object(r.flatten)(i),"id");return Object(s.createElement)("div",{className:"wordcamp-latest-post"},Object(s.createElement)("h4",{className:"wordcamp-latest-post-title"},Object(s.createElement)("a",{href:c},Object(m.stripTagsAndEncodeText)(a))),Object(s.createElement)("span",{className:"wordcamp-latest-post-date"},new Date(n).toLocaleDateString()),Object(s.createElement)("span",{className:"wordcamp-latest-post-excerpt"},Object(m.stripTagsAndEncodeText)(o)),Object(s.createElement)("span",{className:"wordcamp-latest-post-categories"},l.length&&l.map(function(e,t){var n=u[e],r=n.name,c=n.link;return Object(s.createElement)("a",{key:t,href:c},r)})))},f=function(e){var t=e.posts;return Object(s.createElement)(s.Fragment,null,t.map(function(e,t){return Object(s.createElement)(d,{key:t,post:e})}))},b=function(e){var t,n=e.session,c=n.session,a=c.link,o=c.title.rendered,i=c.session_date_time.time,l=c.session_category,u=c._embedded,p=u["wp:term"],d=u.speakers,f=void 0===d?[]:d,b=n.track.name,j=Object(r.keyBy)(Object(r.flatten)(p),"id");l.length>0&&(t=j[l[0]].name);return Object(s.createElement)("div",{className:"wordcamp-schedule-session"},Object(s.createElement)("span",{className:"wordcamp-schedule-session-track"},b),Object(s.createElement)("h4",{className:"wordcamp-schedule-session-title"},Object(s.createElement)("a",{href:a},Object(m.stripTagsAndEncodeText)(o))),Object(s.createElement)("span",{className:"wordcamp-schedule-session-time"},i),Object(s.createElement)("span",{className:"wordcamp-schedule-session-speaker"},!!f.length&&f.map(function(e,t){var n=e.title.rendered,r=e.link;return Object(s.createElement)("a",{key:t,href:r},Object(m.stripTagsAndEncodeText)(n))})),!!t&&Object(s.createElement)("span",{className:"wordcamp-schedule-session-category"},t))},j=function(e){var t=e.title,n=e.sessions;return Object(s.createElement)(s.Fragment,null,Object(s.createElement)("h2",null,t),n.map(function(e,t){return Object(s.createElement)(b,{key:t,session:e})}))},w=function(e){var t=document.getElementById("on-now"),n=document.getElementById("up-next"),r=e.map(function(e){return{track:e.track,session:e.now}}).filter(function(e){return!!e.session}),a=e.map(function(e){return{track:e.track,session:e.next}});r.length&&Object(s.render)(Object(s.createElement)(j,{sessions:r,title:Object(c._x)("On now","title","wordcamp-pwa-page")}),t),a.length&&Object(s.render)(Object(s.createElement)(j,{sessions:a,title:Object(c._x)("Up next","title","wordcamp-pwa-page")}),n)},O=function(){Promise.all([p(Object(i.addQueryArgs)("wp/v2/sessions",{per_page:100,status:"publish",_embed:!0})),p(Object(i.addQueryArgs)("wp/v2/session_track",{per_page:100,status:"publish"})),p(Object(i.addQueryArgs)("wp/v2/posts",{per_page:3,status:"publish",_embed:!0}))]).then(function(e){!function(e){var t=window.now||new Date;if(console.log("Date",t),Array.isArray(e.tracks)){var n=e.tracks.map(function(n){var s=Object(r.sortBy)(e.sessions.filter(function(e){return e.session_track.includes(n.id)}),function(e){return e.meta._wcpt_session_time}),c=s.findIndex(function(e){return t<new Date(1e3*e.meta._wcpt_session_time)}),a=s[c],o=s[c-1];return{track:n,now:o,next:a}});w(n)}}({sessions:e[0],tracks:e[1]}),function(e){var t=document.getElementById("latest-posts");Object(s.render)(Object(s.createElement)(f,{posts:e}),t)}(e[2])}).catch(function(e){console.log("Error: ",e)})};O(),setInterval(O,6e4),window.setDate=function(e){window.now=e,O()}}]);